---
tags: [Bash,TODO]
last_modified_time: 2019-04-20 21:38:37 +0800
---

关于 Shell 的系统学习可参考这个网站：[The Linux Command Line 中文版](https://www.kancloud.cn/thinkphp/linux-command-line/39431)

<p id="markdown-toc"></p>
<!-- vim-markdown-toc GFM -->

* [bash 自动补全](#bash-自动补全)
* [Expansion](#expansion)
* [整数运算](#整数运算)
  * [`$(())`](#)
  * [`expr`](#expr)
* [浮点运算](#浮点运算)
  * [`bc`](#bc)
  * [`awk`](#awk)
* [拼接字符串](#拼接字符串)
  * [使用 `""`](#使用-)
  * [使用 `+=`](#使用--1)
  * [使用 `printf`](#使用-printf)
* [从文件或`stdin`中读取输入](#从文件或stdin中读取输入)
* [转换相对路径为绝对路径](#转换相对路径为绝对路径)
  * [`$PWD`](#pwd)
  * [`realpath`](#realpath)
* [链接](#链接)

<!-- vim-markdown-toc -->

## bash 自动补全

```
yum install bash-completion -y
```

## Expansion
如果想了解一些基本的 Shell Expansion（如通配符，`~`，数学运算，`{}`拓展，`$variable`引用，`$()`，单引号，双引号，转义字符，反斜杠），可以参考如下文章

[Expansion](http://linuxcommand.org/lc3_lts0080.php)

## 整数运算
### `$(())`
   ```
   $ echo "$((5*5+5-3/2))"
   29
   ```
### `expr`
   ```
   $ expr 5 - 4
   1
   ```

## 浮点运算
### `bc`
   ```
   $ echo "5.01-4*2.0"|bc
   -2.99
   ```
### `awk`
   ```
   $ awk 'BEGIN{print 7.01*5-4.01}'
   31.04
   ```

## 拼接字符串
本部分内容参考自 [shell - How to concatenate string variables in Bash - Stack Overflow](https://stackoverflow.com/questions/4181703/how-to-concatenate-string-variables-in-bash)

### 使用 `""`
```
$ foo="Hello"
$ foo="$foo World"
$ echo $foo
Hello World
$ a='hello'
$ b='world'
$ c="$a$b"
$ echo $c
helloworld
```

### 使用 `+=`
```
$ A="X Y"
$ A+=" Z"
$ echo "$A"
X Y Z
$ a=2
$ a+=4
$ echo $a
24
```

### 使用 `printf`
```
$ foo="Hello"
$ printf -v foo "%s World" $foo
$ echo $foo
Hello World
```

## 从文件或`stdin`中读取输入
```
while read line
do
  echo "$line"
done < "${1:-/dev/stdin}"
```
以上脚本实现：执行该脚本时将第一个参数视为文件名，从该文件中读取输入；如果没有传入参数，则从`/dev/stdin`（即标准输入读取输入）

`${1:-/dev/stdin}`根据条件执行替换，即如果`$1`（传入脚本的第一个参数）不存在则由`/dev/stdin`替换。

详情参见 [How to read from a file or stdin in Bash? - Stack Overflow](https://stackoverflow.com/questions/6980090/how-to-read-from-a-file-or-stdin-in-bash)

## 转换相对路径为绝对路径
本部分参考自 [shell - Bash: retrieve absolute path given relative - Stack Overflow](https://stackoverflow.com/questions/4175264/bash-retrieve-absolute-path-given-relative/31605674)

```
relative_path="../../program/py/hack/get_host.sh"
```

### `$PWD`
```
echo "$PWD/$relative_path"
```

### `realpath`
```
echo `realpath $relative_path`
```

## 链接
下面总结了本文中使用的所有链接：

<!-- link start -->

* [How to read from a file or stdin in Bash? - Stack Overflow](https://stackoverflow.com/questions/6980090/how-to-read-from-a-file-or-stdin-in-bash)
* [shell - How to concatenate string variables in Bash - Stack Overflow](https://stackoverflow.com/questions/4181703/how-to-concatenate-string-variables-in-bash)
<!-- link end -->




