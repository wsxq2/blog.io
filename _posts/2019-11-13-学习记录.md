---
tags: [TODO]
last_modified_time: 2019-12-01 13:43:51 +0800
---

本文是笔者的学习记录，受到实习期间的工作日报启发，每天更新。

<p id="markdown-toc"></p>
<!-- vim-markdown-toc GFM -->

* [2019-11-13](#2019-11-13)
  * [时间安排](#时间安排)
  * [成果](#成果)
* [2019-11-14](#2019-11-14)
  * [时间安排](#时间安排-1)
  * [成果](#成果-1)
* [2019-11-15](#2019-11-15)
  * [时间安排](#时间安排-2)
  * [成果](#成果-2)
* [2019-11-16](#2019-11-16)
  * [时间安排](#时间安排-3)
  * [成果](#成果-3)
* [2019-11-17](#2019-11-17)
  * [时间安排](#时间安排-4)
  * [成果](#成果-4)
* [2019-11-18](#2019-11-18)
  * [时间安排](#时间安排-5)
  * [成果](#成果-5)
* [2019-11-19](#2019-11-19)
  * [时间安排](#时间安排-6)
  * [成果](#成果-6)
* [2019-11-20](#2019-11-20)
  * [时间安排](#时间安排-7)
  * [成果](#成果-7)
* [2019-11-21](#2019-11-21)
  * [时间安排](#时间安排-8)
  * [成果](#成果-8)
* [2019-11-23](#2019-11-23)
  * [时间安排](#时间安排-9)
  * [成果](#成果-9)
* [2019-11-27](#2019-11-27)
  * [时间安排](#时间安排-10)
* [2019-11-28](#2019-11-28)
  * [时间安排](#时间安排-11)
* [2019-11-29](#2019-11-29)
  * [时间安排](#时间安排-12)
* [2019-12-01](#2019-12-01)
  * [时间安排](#时间安排-13)

<!-- vim-markdown-toc -->

## 2019-11-13
### 时间安排
1. (140)修改 server-agent 的网络配置文件，安装 atomic，禁用 epel 和 atomic（因为<https://wiki.centos.org/AdditionalResources/Repositories>）。修改`preloaded-vars.conf`文件以准备安装`ossec`。学习 stmp vs pop3 vs imap
1. (40)通过《Linux运维之道》学习`iptables`和`firewall-cmd`
1. (70)编写`reduce_bash_history.sh`
1. (40)开始进行学习记录
   ```
   alias vlr="vim $bl/../lr.md"
   ```
1. (90)在两个 CentOS 和一个 Windows 上安装 OSSEC，以其中一个 CentOS 为 Sever，其它为 Agent

### 成果
1.  CentOS 安装 ossec
1.  Windows 2008 R2 安装 ossec
   
## 2019-11-14
### 时间安排
1. (90)iptables 学习笔记——[防火墙](https://wsxq2.55555.io/blog/2019/11/14/防火墙)并应用到 OSSEC 研究环境中
1. (40)firewalld 学习笔记并应用到 OSSEC 研究环境中
1. (30)2019-11-14-同步系统时间.md并应用到 OSSEC 研究环境中
1. (20)修改`~/.bashrc`中的`export EDITOR`部分并应用到 OSSEC 研究环境中
1. (120)分析 OSSEC 完整性校验功能模块的相关内容，主要包括 配置文件、日志、命令行工具（manage-agent,agent-control,ossec-control）、Server 与 Agent 交流所用的协议
1. (90)搭建 PPTP VPN

### 成果
两篇博客：
* 2019-11-14-同步系统时间.md
* 2019-11-14-防火墙.md

## 2019-11-15
### 时间安排
1. (90)VPN.md，解决了 Windows 10 连上 PPTP VPN 后无法访问 Internet 的问题
1. (90)PPTP with static IP?
1. (90)pptp on CentOS server can't ping other machines on the LAN?
1. (150)Virtual Box NAT can't use VPN?
1. (30)沟通协作
1. (30)分析 mono HTTP server root directory

### 成果
1. VPN.md
2. 解决了 3 个 VPN 相关的问题。参见 VPN.md

## 2019-11-16
### 时间安排
1. (330)整理昨天的研究内容、整理学习记录

### 成果
改善了如下博客：
1. 2019-05-28-Secure-Shell(SSH).md
1. 2019-11-13-HIDS.md
1. 2019-11-13-学习记录.md
1. 2019-11-13-邮件系统相关协议.md
1. 2019-11-14-同步系统时间.md
1. 2019-11-14-防火墙.md
1. 2019-11-15-VPN.md
新增了如下博客：
1. 2019-11-16-路由器.md

## 2019-11-17
### 时间安排
1. (140)阅读 OSSEC 代码，找出 syscheck 的核心函数。以失败告终。
   ```
   root@sc:src# find . -name '*syscheck*.c'
   ./analysisd/decoders/syscheck.c
   ./config/syscheck-config.c
   ./syscheckd/syscheck.c
   ./util/syscheck_control.c
   ./util/syscheck_update.c
   ./win32/setup-syscheck.c
   root@sc:src#
   ```
   
1. (150)学习 stat 函数，找出 hash 的核心函数

   ```
   stat --help
   man 1 stat
   man 3 stat # 注意其中的第二个 example
   ```

   ```
   root@sc:src# find . -name '*md5*.c'
   ./os_crypto/md5/md5.c
   ./os_crypto/md5/md5_op.c
   ./os_crypto/md5_sha1/md5_sha1_op.c
   root@sc:src# find . -name '*sha1*.c'
   ./os_crypto/md5_sha1/md5_sha1_op.c
   ./os_crypto/sha1/sha1_op.c
   ```
   
1. (90)找出 syscheck 的核心函数：
   ```
   main(src/syscheckd/syscheck.c)->start_daemon(syscheck.c)->run_dbcheck(create_db.c)->read_dir(create_db.c)->read_file(create_db.c)->OS_MD5_SHA1_File(create_db.c)->{MD5Init,SHA1Init,SHA1Update,SHA1Final,MD5Update,MD5Final}(md5_sha1_op.c)
   ```
   主要使用的方法：
   ```
   root@master:src# grep -r '^void start_daemon' .
   ./syscheckd/syscheck.h:void start_daemon(void) __attribute__((noreturn));
   ./syscheckd/run_check.c:void start_daemon()
   root@master:src# grep -r '^int run_dbcheck(' .
   ./syscheckd/create_db.c:int run_dbcheck()
   ./syscheckd/syscheck.h:int run_dbcheck(void);
   ...
   ```
   
1. (90)syscheck 编码。测试未通过

### 成果
1. syscheck/main.c

## 2019-11-18
### 时间安排
1. (20)整理昨天的学习记录
1. (120)完成 check_one_file(syscheck/main.c)
1. (180)完成 check_one_dir(syscheck/main.c)
1. (150)完成 send_result(syscheck/main.c)

### 成果

## 2019-11-19
### 时间安排
1. (60)整理昨天的学习记录
1. (30)A测
1. (240)试图优化 check_one_dir，但是以失败告终


### 成果

## 2019-11-20
### 时间安排
1. (30)学习 git 分支用法，`git stash`用法。取消优化，回到 dev 分支
1. (10)解决 git bash completion 的问题

### 成果

## 2019-11-21
### 时间安排
1. (120)优化 2018-11-05-Bash使用笔记.md、合并`*yum*` `*rpm*` `*apt*`为 2019-11-21-Linux包管理器.md、2019-08-18-C语言笔记.md、GDB使用笔记

### 成果

## 2019-11-23
### 时间安排
1. (150)A测报告

### 成果

## 2019-11-27
### 时间安排
1. (150)科学上网 Vmess+WS+TLS 方案
1. (120)分析 SS 科学上网失败原因。以失败告终。但得到了客户端和服务器端的一次完整的失败连接的会话的包 notebook_ssserver.pcapng 和 notebook_ssclient.pcapng

## 2019-11-28
### 时间安排
1. (90)在国内服务器上搭建 v2ray 作为中转。从而简化客户端的代理配置
1. (60)试图使用七牛云的 CDN 以提高科学上网的速度，但是由于以下原因放弃：
   1. （最关键）使用七牛云的 CDN 需要域名备案。
   1. 使用 HTTPS 要收费
   1. 不一定能起到加速效果，毕竟服务器在国外

## 2019-11-29
### 时间安排
1. (180)分析 notebook_ssserver.pcapng 和 notebook_ssclient.pcapng 以得到 SS 科学上网失败的原因。最后发现是因为客户端在第二轮发送数据时被 GFW 拦截了（服务器端没有收到该数据）
1. (270)整理 科学上网 V2ray + CDN 相关方案到 科学上网.md

## 2019-12-01
### 时间安排
1. (60)解决非 PC 端访问博客的界面不友好问题（目录在移动端上应当默认关闭）

